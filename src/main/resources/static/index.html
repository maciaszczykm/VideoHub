<!doctype html>
<html>
<head>
    <title>VideoHub</title>
    <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <style>
        .top {
            background-color: #080808;
            width: 100%;
            height: 50px;
        }
    </style>
</head>
<body ng-app="hello">
<div class="top" id="top">
</div>
<div class="container">
    <h1>Greeting</h1>
    <div ng-controller="home" ng-cloak class="ng-cloak">
        <p>The ID is {{greeting.id}}</p>
        <p>The content is {{greeting.content}}</p>
    </div>
</div>
<script src="bower_components/angularjs/angular.js"></script>
<script src="js/hello.js"></script>
<script src="js/shader.js"></script>
<script>
    var container = document.getElementById('top');
    var renderer = new FSS.SVGRenderer();
    var scene = new FSS.Scene();
    var light = new FSS.Light('#111122', '#FF0022');
    var geometry = new FSS.Plane(50, 1000, 20, 20);
    var material = new FSS.Material('#FFFFFF', '#FFFFFF');
    var mesh = new FSS.Mesh(geometry, material);
    var now, start = Date.now();
    function initialise() {
        scene.add(mesh);
        scene.add(light);
        container.appendChild(renderer.element);
        window.addEventListener('resize', resize);
    }
    function resize() {
        var width = container.offsetWidth, // No need to query these twice, when in an onresize they can be expensive
                height = container.offsetHeight;

        renderer.setSize(width, height);

        scene.remove(mesh); // Remove the mesh and clear the canvas
        renderer.clear();

        geometry = new FSS.Plane(width, height, 80, 5); // Recreate the plane and then mesh
        mesh = new FSS.Mesh(geometry, material);

        scene.add(mesh); // Readd the mesh
    }
    function animate() {
        now = Date.now() - start;
        light.setPosition(300*Math.sin(now*0.001), 200*Math.cos(now*0.0005), 60);
        renderer.render(scene);
        requestAnimationFrame(animate);
    }
    initialise();
    resize();
    animate();
</script>
</body>
</html>